# For more information visit:
# https://docs.helix.ml/helix/private-deployment/manual-install/kubernetes/ and
# https://docs.helix.ml/helix/private-deployment/environment-variables/

global:
  # Set this AND envVariables.APP_URL to the public URL of your hostname, e.g.
  # https://helix.mydomain.com if you have set up TLS termination.
  serverUrl: http://localhost:8080

image:
  # It's good practice to pin the version of the software you're running!
  # Get this from https://get.helix.ml/latest.txt or check https://github.com/helixml/helix/releases
  # YOU MUST SET THIS VALUE OR IT WILL NOT WORK
  tag: ""

controlplane:
  # Haystack configuration to use haystack for production-ready RAG
  haystack:
    enabled: false
    embeddingsModel: "Alibaba-NLP/gte-Qwen2-7B-instruct"
    embeddingsDim: "3584"
    chunkSize: "1000"
    chunkOverlap: "50"
  
  # RAG configuration
  rag:
    # Valid values: haystack, typesense
    defaultProvider: "haystack"
    # Valid values: vllm (for haystack which uses external GPU-accelerated
    # embeddings, typesense does its own embeddings so leave this unset for
    # typesense)
    embeddingsProvider: "vllm"
  
  # Inference configuration
  inference:
    # Valid values: openai, togetherai, helix
    defaultProvider: "openai"
  
  # Provider configurations
  providers:
    vllm:
      baseUrl: "http://url-of-vllm-server/v1"
      apiKey: "EMPTY"
    openai:
      baseUrl: "http://url-of-openai-compatible-server/v1"
      apiKey: "apikey"
    togetherai:
      apiKey: "apikey-from-togetherai"

# Environment variables that will be added to the configmap
envVariables:
  LOG_LEVEL: debug
  APP_URL: http://localhost:8080
  # Database
  POSTGRES_HOST: my-helix-controlplane-postgresql
  POSTGRES_USER: helix
  POSTGRES_PASSWORD: oh-hallo-insecure-password
  POSTGRES_DATABASE: helix
  # Runners
  RUNNER_TOKEN: oh-hallo-insecure-token
  # Keycloak location
  KEYCLOAK_URL: http://keycloak:80/auth
  # How Keycloak redirects the users on login, should be user facing
  KEYCLOAK_FRONTEND_URL: http://localhost:8080/auth
  KEYCLOAK_USER: "admin"
  KEYCLOAK_PASSWORD: "oh-hallo-insecure-password"
  # Dashboard
  ADMIN_USER_IDS: "all"
  # Evals
  HELIX_API_KEY: "helix_api_key"

tika:
  enabled: true

chrome:
  enabled: true

typesense:
  enabled: true
  apiKey: typesense

gptscript:
  enabled: true
  replicas: 2
  concurrency: 20
  maxTasks: 0

postgresql:
  enabled: true
  auth:
    postgresPassword: postgres
    username: postgres
    password: postgres
    database: postgres

persistence: # for filestore
  enabled: true
  size: 8Gi