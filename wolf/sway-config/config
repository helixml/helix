# Helix Personal Dev Environment custom Sway configuration
# This gets included EARLY by GOW base config (before $mod is defined)
# Therefore: NO bindsym commands here! Add those to startup-app.sh instead.
#
# ===================================================================
# TESTING INSTRUCTIONS - SwayFX DRM Device Conflict Resolution
# ===================================================================
#
# This config has been hardened to prevent DRM device conflicts that cause:
# "legacy_drm_handle_device: Assertion `wl->drm_render_name == NULL' failed"
#
# To test configuration changes:
#
# 1. Rebuild Sway image after modifying this file:
#    ./stack build-sway
#
# 2. Restart Wolf to pick up new image:
#    docker compose -f docker-compose.dev.yaml down wolf
#    docker compose -f docker-compose.dev.yaml up -d wolf
#
# 3. Create a new PDE or External Agent session (existing containers won't update)
#
# 4. Check logs for diagnostics:
#    docker compose -f docker-compose.dev.yaml logs wolf | tail -50
#
# 5. Look for:
#    - "=== DRM Device Diagnostics ===" showing available devices
#    - Sway startup messages
#    - If crash: Error handler message + container stays alive
#
# 6. If container crashes anyway, check Wolf logs for assertion details:
#    docker compose -f docker-compose.dev.yaml logs wolf | grep -A5 -B5 "Assertion"
#
# TROUBLESHOOTING:
# - If multiple renderD* devices appear: GPU conflict, check docker-compose.dev.yaml
# - If "ERROR: Sway compositor crashed": Check which config option you re-enabled
# - Container now stays alive after crashes for `docker exec` debugging
#
# ===================================================================

# Disable Xwayland - force native Wayland for all apps (fixes Zed input issues with NVIDIA)
xwayland disable

# Set Helix wallpaper
output * bg /usr/share/backgrounds/helix-logo.png fill

# Configure HiDPI scaling for display WL-1
output WL-1 scale 1.5
